<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Spring 入门，学会 Bean 的装配和属性注入，Spring 核心特性之 IOC。">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring (一) - IOC 控制反转、DI 依赖注入">
<meta property="og:url" content="http://example.com/2021/06/10/Spring(%E4%B8%80)-IOC%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%E3%80%81DI%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/index.html">
<meta property="og:site_name" content="Xiao&#39;s Blog">
<meta property="og:description" content="Spring 入门，学会 Bean 的装配和属性注入，Spring 核心特性之 IOC。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://image.kongxiao.top/image-20200613222724177.png">
<meta property="article:published_time" content="2021-06-09T16:00:00.000Z">
<meta property="article:modified_time" content="2022-05-31T14:55:40.663Z">
<meta property="article:author" content="Kong Xiao">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="IOC">
<meta property="article:tag" content="Bean">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://image.kongxiao.top/image-20200613222724177.png">

<link rel="canonical" href="http://example.com/2021/06/10/Spring(%E4%B8%80)-IOC%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%E3%80%81DI%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Spring (一) - IOC 控制反转、DI 依赖注入 | Xiao's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Xiao's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">进步之路</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">29</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">26</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/xiaokong0510" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/10/Spring(%E4%B8%80)-IOC%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%E3%80%81DI%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.png">
      <meta itemprop="name" content="Kong Xiao">
      <meta itemprop="description" content="半路出家 举步维艰">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiao's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Spring (一) - IOC 控制反转、DI 依赖注入
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-10 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-10T00:00:00+08:00">2021-06-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-31 22:55:40" itemprop="dateModified" datetime="2022-05-31T22:55:40+08:00">2022-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">框架</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%A1%86%E6%9E%B6/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
                </span>
            </span>

          
            <div class="post-description">Spring 入门，学会 Bean 的装配和属性注入，Spring 核心特性之 IOC。</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Spring 基础知识学习笔记 (一)，内容包括：</p>
<ol>
<li>Spring 入门案例</li>
<li>IOC 控制反转理解</li>
<li>属性注入的不同方式</li>
<li>注入不同类型的属性值</li>
<li>自动装配与注解开发</li>
</ol>
<p>参考视频：</p>
<p>B站 尚硅谷雷丰阳大神的 Spring、Spring MVC、MyBatis 课程 <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1d4411g7tv">https://www.bilibili.com/video/BV1d4411g7tv</a></p>
<p>【狂神说Java】Spring5 最新完整教程 IDEA 版通俗易懂  <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1WE411d7Dv">https://www.bilibili.com/video/BV1WE411d7Dv</a></p>
<h2 id="1-Spring-概述"><a href="#1-Spring-概述" class="headerlink" title="1. Spring 概述"></a>1. Spring 概述</h2><ul>
<li><p>开源的免费框架，是一个容器，可以管理所有的组件(类)；</p>
</li>
<li><p>轻量级的、非入侵的框架，不依赖于 Spring 的 API</p>
</li>
<li><p><strong>控制反转(IOC)和面向切面编程(AOP)</strong></p>
</li>
<li><p>支持事务处理，支持对框架整合</p>
</li>
<li><p>组件化、一站式</p>
<p>官网：<a target="_blank" rel="noopener" href="https://spring.io/">https://spring.io/</a></p>
<p>文档：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/5.2.5.RELEASE/spring-framework-reference/core.html#spring-core">https://docs.spring.io/spring/docs/5.2.5.RELEASE/spring-framework-reference/core.html#spring-core</a></p>
</li>
</ul>
<p>【总结】：Spring 是一个轻量级的、控制反转和面向切面编程的框架</p>
<p>体系结构：</p>
<p><img src="http://image.kongxiao.top/image-20200613222724177.png" alt="image-20200613222724177"></p>
<ul>
<li><p>Test：Spring 的单元测试模块</p>
</li>
<li><p>Core Container：核心容器 (IOC)，包括 4 部分： </p>
<ul>
<li>spring-core：提供了框架的基本组成部分，包括 IoC 和依赖注入功能。</li>
<li>spring-beans：提供 BeanFactory，</li>
<li>spring-context：模块建立在由 core 和 beans 模块的基础上建立起来的，它以一种类似于 JNDI 注册的方式访问对象。Context 模块继承自 Bean 模块，并且添加了国际化（比如，使用资源束）、事件传播、资源加载和透明地创建上下文（比如，通过 Servelet 容器）等功能</li>
<li>spring-expression：提供了强大的表达式语言，用于在运行时查询和操作对象图。它是 JSP2.1 规范中定义的统一表达式语言的扩展，支持set和get属性值、属性赋值、方法调用、访问数组集合及索引的内容、逻辑算术运算、命名变量、通过名字从Spring IoC容器检索对象，还支持列表的投影、选择以及聚合等</li>
</ul>
</li>
<li><p>AOP+Aspects：面向切面编程模块</p>
</li>
<li><p>Data Access：数据访问模块</p>
</li>
<li><p>Web：Spring开发Web引用模块</p>
</li>
</ul>
<p>导入依赖：spring-webmvc 包含的最广泛</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-HelloWorld-案例"><a href="#2-HelloWorld-案例" class="headerlink" title="2. HelloWorld 案例"></a>2. HelloWorld 案例</h2><h3 id="2-1-IOC-和-DI"><a href="#2-1-IOC-和-DI" class="headerlink" title="2.1 IOC 和 DI"></a>2.1 IOC 和 DI</h3><p><strong>Inversion of Control：控制反转。</strong></p>
<p>控制，即资源的获取方式，包括：</p>
<ul>
<li><p>主动式：要什么资源自己创建，对于复杂对象的创建时比较庞大的工程</p>
</li>
<li><p>被动式：资源的获取不是我们自己创建，而是交给容器创建。</p>
<p>所谓容器，是用来管理所有的组件的(即有功能的类)；容器可以自动探查出哪些组件需要用到另一些组件</p>
</li>
</ul>
<p><strong>DI：Dependency Injection，依赖注入</strong>，是 IOC 的一种实现形式。容器能知道哪个组件运行时需要另外一个类，容器通过反射的形式，将容器中准备好的对象注入。</p>
<h3 id="2-2-入门案例"><a href="#2-2-入门案例" class="headerlink" title="2.2 入门案例"></a>2.2 入门案例</h3><p>HelloWorld：所有的对象交给容器创建，给容器中注册组件</p>
<ol>
<li><p>新建一个 Person 类，<strong>添加 set 方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span>  String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建一个 Spring 配置文件 ApplicationContext.xml，注册 bean。</p>
<p>使用<code>bean</code>标签注册一个 Person 对象，Spring会自动创建这个 Person 对象</p>
<ul>
<li>class：写要注册的组件的全类名</li>
<li>id：这个对象的唯一标识</li>
<li>使用 <code>property</code> 标签为 Person 对象的属性值，name：指定属性名；value：指定属性值</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--注册一个Person对象，Spring会自动创建这个Person对象</span></span><br><span class="line"><span class="comment">        class:写要注册的组件的全类名</span></span><br><span class="line"><span class="comment">        id:这个对象的唯一标识</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Person&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--使用property标签为Person对象的属性赋值</span></span><br><span class="line"><span class="comment">            name:指定属性名</span></span><br><span class="line"><span class="comment">            value:指定属性值</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan@163.com&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>测试：</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">com</span>.xiao.helloworld.IocTest &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;ApplicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">Person</span> <span class="variable">bean</span> <span class="operator">=</span> (Person) ioc.getBean(<span class="string">&quot;person01&quot;</span>);</span><br><span class="line">        System.out.println(bean);</span><br><span class="line">        <span class="type">Person</span> <span class="variable">bean2</span> <span class="operator">=</span> (Person) ioc.getBean(<span class="string">&quot;person01&quot;</span>);</span><br><span class="line">        System.out.println(bean == bean2);</span><br><span class="line">        <span class="type">Person</span> <span class="variable">bean3</span> <span class="operator">=</span> ioc.getBean(Person.class);</span><br><span class="line">        System.out.println(bean == bean3 );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Person(lastName=zhangsan, age=<span class="number">20</span>, gender=<span class="number">0</span>, email=zhangsan@<span class="number">163.</span>com)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p> 几个细节：</p>
</blockquote>
<ol>
<li>ApplicationContext：IOC 容器的接口</li>
<li><strong>同一个组件在 IOC 容器中默认是单实例的</strong></li>
<li><strong>容器中的对象的创建在容器创建完成的时候就已经创建好了</strong></li>
<li>容器中如果没有这个组件，获取组件时会报异常 NoSuchBeanDefinitionException</li>
<li>IOC 容器用 <code>property</code> 标签创建这个组件对象的时候，会利用 setter 方法为其属性赋值，<strong>注意属性名是set方法后的那串的首字母小写</strong></li>
</ol>
</li>
</ol>
<h3 id="2-3-根据-bean-类型获取-bean-实例"><a href="#2-3-根据-bean-类型获取-bean-实例" class="headerlink" title="2.3 根据 bean 类型获取 bean 实例"></a>2.3 根据 bean 类型获取 bean 实例</h3><p>ioc.getBean() 方法中可以传入 bean 的 id，也可以传入class对象，也可以同时传入。</p>
<p>如果一个类型指只注册了一个，则可以通过<code>ioc.getBean(....class)</code>获得该对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">bean1</span> <span class="operator">=</span> ioc.getBean(Person.class);</span><br></pre></td></tr></table></figure>

<p>但是如果 IOC 容器中这个类型的 bean 有多个，则会报异常 NoUniqueBeanDefinitionException</p>
<p>也可以同时传入 bean 的 id 和 class 对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">bean1</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;person02&quot;</span>,Person.class);</span><br></pre></td></tr></table></figure>

<h2 id="3-属性的注入方式"><a href="#3-属性的注入方式" class="headerlink" title="3. 属性的注入方式"></a>3. 属性的注入方式</h2><ul>
<li><p>依赖：bean 对象的创建依赖于容器</p>
</li>
<li><p>注入：bean 对象中所有的属性由容器来注入</p>
</li>
</ul>
<h3 id="3-1-setter-注入"><a href="#3-1-setter-注入" class="headerlink" title="3.1 setter 注入"></a>3.1 setter 注入</h3><p><strong>需要借助 set 方法</strong>，使用<code>propetry</code>标签</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-通过构造器注入"><a href="#3-2-通过构造器注入" class="headerlink" title="3.2 通过构造器注入"></a>3.2 通过构造器注入</h3><p>使用<code>constructor-arg</code>标签，则调用构造器进行属性注入，<strong>需要借助有参构造</strong></p>
<ul>
<li><strong>通过构造函数中的参数名称注入</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person02&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;wangwu&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;wangwu@qq.com&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>只写 value 属性，会默认按顺序寻找构造方法进行匹配</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person03&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span>  <span class="attr">value</span>=<span class="string">&quot;wangwu&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span>  <span class="attr">value</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span>  <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;wangwu@qq.com&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>通过构造函数参数类型</strong>，默认按照顺序</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person04&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;wangwu&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span> <span class="attr">value</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;wangwu@qq.com&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>通过构造函数参数索引</strong>，如果有多个重载的构造函数时也可以配合 type 一起使用</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person05&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;wangwu&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;3&quot;</span> <span class="attr">value</span>=<span class="string">&quot;wangwu@qq.com&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-p-名称空间注入"><a href="#3-3-p-名称空间注入" class="headerlink" title="3.3 p 名称空间注入"></a>3.3 p 名称空间注入</h3><p>使用 p:propertyName 直接注入属性的值。本质上还是调用的 set 方法</p>
<p>导入头文件约束：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person06&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Person&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:lastName</span>=<span class="string">&quot;zhangsan&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot;30&quot;</span> <span class="attr">p:email</span>=<span class="string">&quot;zhangsan@qq.com&quot;</span> <span class="attr">p:gender</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-c-命名空间注入"><a href="#3-4-c-命名空间注入" class="headerlink" title="3.4 c 命名空间注入"></a>3.4 c 命名空间注入</h3><p>c (构造: Constructor) 命名空间注入，使用 c:propertyName 注入属性值,<strong>本质上使用的是构造器注入</strong></p>
<p>导入头文件约束：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns:c=&quot;http://www.springframework.org/schema/c&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person07&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.bean.Person&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">c:lastName</span>=<span class="string">&quot;zhangsan&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;30&quot;</span> <span class="attr">c:email</span>=<span class="string">&quot;zhangsan@qq.com&quot;</span> <span class="attr">c:gender</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-注入不同类型的属性值"><a href="#4-注入不同类型的属性值" class="headerlink" title="4. 注入不同类型的属性值"></a>4. 注入不同类型的属性值</h2><p>新建了一个 Student 类和一个 Address 类，来测试不同类型的属性值注入：</p>
<p>Student 类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    <span class="keyword">private</span> String[] books;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbies;</span><br><span class="line">    <span class="keyword">private</span> Map card;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; games;</span><br><span class="line">    <span class="keyword">private</span> String wife;</span><br><span class="line">    <span class="keyword">private</span> Properties info;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Address 类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-注入基本类型值"><a href="#4-1-注入基本类型值" class="headerlink" title="4.1 注入基本类型值"></a>4.1 注入基本类型值</h3><p>之前的例子都是注入基本类型的属性。如果不赋值的话，会使用属性的默认值</p>
<h3 id="4-2-注入-null"><a href="#4-2-注入-null" class="headerlink" title="4.2 注入 null"></a>4.2 注入 null</h3><p>如果有属性给了初始值，想注入为 null，则在 property 内部需要使用 <code>null</code> 标签：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意，使用 value&#x3D;”null” 是不对的：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Student&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;null&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的用法虽然对象的 name 属性打印出来是 null，但是 bean.getName()&#x3D;&#x3D;null 是 false：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">bean</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;student01&quot;</span>, Student.class);</span><br><span class="line">System.out.println(bean);</span><br><span class="line">System.out.println(bean.getName()==<span class="literal">null</span>);  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student(name=<span class="literal">null</span>, address=<span class="literal">null</span>, books=<span class="literal">null</span>, hobbies=<span class="literal">null</span>, card=<span class="literal">null</span>, games=<span class="literal">null</span>, wife=<span class="literal">null</span>, info=<span class="literal">null</span>)</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-注入-bean"><a href="#4-3-注入-bean" class="headerlink" title="4.3 注入 bean"></a>4.3 注入 bean</h3><p>可以使用<code>ref</code>引用外部的值：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--先注册一个Address对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Address&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;num&quot;</span> <span class="attr">value</span>=<span class="string">&quot;001&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student02&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--通过id值引用--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;address01&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>要注意，<strong>ref 是严格的引用</strong>，通过容器拿到的 Address 实例就是 Student 实例中的 Address 属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Address</span> <span class="variable">address01</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;address01&quot;</span>, Address.class);</span><br><span class="line"><span class="type">Student</span> <span class="variable">student02</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;student02&quot;</span>, Student.class);</span><br><span class="line">System.out.println(student02);</span><br><span class="line">System.out.println(student02.getAddress() == address01);  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>也可以<strong>引用内部 bean</strong>，在<code>property</code>标签体中再定义bean，这个 Address 和外面的没有关系，<strong>只能内部使用，外面获取不到</strong>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student03&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Address&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;tianijng&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;num&quot;</span> <span class="attr">value</span>=<span class="string">&quot;002&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-集合类型赋值"><a href="#4-3-集合类型赋值" class="headerlink" title="4.3 集合类型赋值"></a>4.3 集合类型赋值</h3><h4 id="01-数组"><a href="#01-数组" class="headerlink" title="01 数组"></a>01 数组</h4><p><code>array</code>标签+<code>value</code>标签：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>西游记<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>红楼梦<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>水浒传<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="02-List"><a href="#02-List" class="headerlink" title="02 List"></a>02 List</h4><p><code>list</code>标签+<code>value</code>标签：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>玩游戏<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>看电影<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="03-Map"><a href="#03-Map" class="headerlink" title="03 Map"></a>03 Map</h4><p><code>map</code>标签+<code>entry</code>标签，<code>entry</code>也可以使用ref引用：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;中行&quot;</span> <span class="attr">value</span>=<span class="string">&quot;001&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;邮政&quot;</span> <span class="attr">value</span>=<span class="string">&quot;002&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key-ref</span>=<span class="string">&quot;...&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;....&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="04-Properties"><a href="#04-Properties" class="headerlink" title="04 Properties"></a>04 Properties</h4><p><code>props</code>标签：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;学号&quot;</span>&gt;</span>20190604<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;性别&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;姓名&quot;</span>&gt;</span>小明<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="05-util-名称空间"><a href="#05-util-名称空间" class="headerlink" title="05 util 名称空间"></a>05 util 名称空间</h4><p>util 名称空间可以创建集合类型的 bean，以便别的地方引用。</p>
<p>头文件约束：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xmlns:util=&quot;http://www.springframework.org/schema/util&quot;</span><br><span class="line"></span><br><span class="line">xsi:schemaLocation= &quot;http://www.springframework.org/schema/util</span><br><span class="line">http://www.springframework.org/schema/util/spring-util-4.1.xsd&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--util名称空间 提取出通用的集合--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;myList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>玩游戏<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>看电影<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用ref直接引用util提取出来的集合id即可--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student05&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myList&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-级联属性赋值"><a href="#4-4-级联属性赋值" class="headerlink" title="4.4 级联属性赋值"></a>4.4 级联属性赋值</h3><p><code>propetry </code>标签中的 name 标签，可以使用级联属性，修改属性的属性，但是原来属性的值会被修改。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Address&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;num&quot;</span> <span class="attr">value</span>=<span class="string">&quot;001&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student02&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;address01&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--将address01中的num属性进行了修改--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address.num&quot;</span> <span class="attr">value</span>=<span class="string">&quot;00005&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-5-继承实现配置信息重用"><a href="#4-5-继承实现配置信息重用" class="headerlink" title="4.5 继承实现配置信息重用"></a>4.5 继承实现配置信息重用</h3><p>指定 parent 属性为要重用的 bean 的 id 值，不写的属性就沿用，也可以重写定义属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan@163.com&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--parent：要重用的配置信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person001&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Person&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;person01&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--单独修改name属性的值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhang&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>还可以指定属性 abstract&#x3D;”true”，这样的 bean 只能被用来继承信息，不能获取实例。否则会报异常 BeanIsAbstractException</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.helloworld.bean.Person&quot;</span> <span class="attr">abstract</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--使用property标签为Person对象的属性赋值</span></span><br><span class="line"><span class="comment">        name:指定属性名</span></span><br><span class="line"><span class="comment">        value:指定属性值</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan@163.com&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-bean-的一些性质"><a href="#5-bean-的一些性质" class="headerlink" title="5 bean 的一些性质"></a>5 bean 的一些性质</h2><h3 id="5-1-bean-之间依赖"><a href="#5-1-bean-之间依赖" class="headerlink" title="5.1 bean 之间依赖"></a>5.1 bean 之间依赖</h3><p>多个 bean 的默认创建顺序，是按照配置顺序创建的。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.bean.Student&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.bean.Address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.bean.Person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Student创建了</span><br><span class="line"><span class="selector-tag">Address</span>创建了</span><br><span class="line">Person创建了</span><br></pre></td></tr></table></figure>

<p>可以用 depends-on 属性进行设置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.bean.Student&quot;</span> <span class="attr">depends-on</span>=<span class="string">&quot;person,address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.bean.Address&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.bean.Person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Person创建了</span><br><span class="line"><span class="selector-tag">Address</span>创建了</span><br><span class="line">Student创建了</span><br></pre></td></tr></table></figure>

<h3 id="5-2-bean-的作用域-scope"><a href="#5-2-bean-的作用域-scope" class="headerlink" title="5.2 bean 的作用域 scope"></a>5.2 bean 的作用域 scope</h3><p>在 bean 配置中可以设置作用域属性 scope：</p>
<ul>
<li><p>single： 单例模式，是默认模式。<strong>在容器启动完成之前就已经创建好对象保存在容器中了。</strong></p>
</li>
<li><p>prototype ：原型模式，容器启动会不去创建，<strong>每次从容器中 get 的时候才会产生一个新对象</strong></p>
</li>
<li><p>request：在 web 环境下，同一次请求创建一个 bean 实例(没用)</p>
</li>
<li><p>session：在 web 环境下，同一次会话创建一个 bean 实例(没用)</p>
</li>
</ul>
<h3 id="5-3-静态工厂与实例工厂"><a href="#5-3-静态工厂与实例工厂" class="headerlink" title="5.3 静态工厂与实例工厂"></a>5.3 静态工厂与实例工厂</h3><p>静态工厂：工厂本身不用创建对象，通过静态方法调用，对象 &#x3D; 工厂类.工厂方法名( )</p>
<p>实例工厂：工厂本身需要创建对象，先创建工厂对象，再通过工厂对象创建所需对象</p>
<p>新建三个类 Air、AirStaticFactory和AirInstanceFactory：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Air</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double weight;</span><br><span class="line">    <span class="keyword">private</span> Double length;</span><br><span class="line">    <span class="keyword">private</span> Integer PersonNum;</span><br><span class="line">    <span class="comment">//get/set...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AirStaticFactory</span> &#123;</span><br><span class="line">    <span class="comment">//提供一个静态方法获取Air对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Air <span class="title function_">getAir</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AirStaticFactory正在造飞机！&quot;</span>);</span><br><span class="line">        <span class="type">Air</span> <span class="variable">air</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Air</span>();</span><br><span class="line">        air.setName(name);</span><br><span class="line">        air.setLength(<span class="number">100.0</span>);</span><br><span class="line">        air.setWeight(<span class="number">100.0</span>);</span><br><span class="line">        air.setPersonNum(<span class="number">200</span>);</span><br><span class="line">        <span class="keyword">return</span> air;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AirInstanceFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//提供一个方法获取Air对象</span></span><br><span class="line">    <span class="keyword">public</span> Air <span class="title function_">getAir</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AirInstanceFactory正在造飞机！&quot;</span>);</span><br><span class="line">        <span class="type">Air</span> <span class="variable">air</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Air</span>();</span><br><span class="line">        air.setName(name);</span><br><span class="line">        air.setLength(<span class="number">100.0</span>);</span><br><span class="line">        air.setWeight(<span class="number">100.0</span>);</span><br><span class="line">        air.setPersonNum(<span class="number">200</span>);</span><br><span class="line">        <span class="keyword">return</span> air;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>静态工厂：</strong>不需要创建工厂本身，class 指定静态工厂的全类名，factory-method 指定工厂方法</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--静态工厂，不需要创建工厂本身,class指定静态工厂的全类名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;air01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.AirStaticFactory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getAir&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;林青霞&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取到的就是Air的实例</span></span><br><span class="line"><span class="type">Air</span> <span class="variable">air01</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;air01&quot;</span>,Air.class);</span><br></pre></td></tr></table></figure>

<p><strong>实例工厂：</strong>先创建示例工厂本身，再创建对象，指定当前对象的创建需要哪个工厂 factory-bean 和哪个方法  factory-method</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--实例工厂，需要先创建示例工厂本身--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;airInstanceFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.AirInstanceFactory&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--指定当前对象的创建需要哪个工厂和哪个方法，不需要指定class了--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;air02&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;airInstanceFactory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getAir&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;张学友&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Air</span> <span class="variable">air02</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;air02&quot;</span>,Air.class);</span><br></pre></td></tr></table></figure>

<h3 id="5-4-自定义工厂"><a href="#5-4-自定义工厂" class="headerlink" title="5.4 自定义工厂"></a>5.4 自定义工厂</h3><p><strong>实现了 FactoryBean 接口的类</strong>，是 Spring 可以认识的工厂类，Spring 会自动调用工厂方法创建对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFactoryBeanImpl</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;Air&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//工厂方法，Spring会自动调用这个方法来创建对象并返回</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Air <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Air</span> <span class="variable">air</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Air</span>();</span><br><span class="line">        air.setName(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> air;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回对象的类型,Spring会自动调用这个方法来确认创建的对象是什么类型</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//是单例模式吗？</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注册工厂对象，会自动调用工厂方法返回对象：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册工厂对象，会自动调用工厂方法返回对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;air03&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.MyFactoryBeanImpl&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">air03</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;air03&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>这种类型，IOC 容器启动时不会创建实例，使用 getBean 时才会创建</p>
<h3 id="5-5-bean-的生命周期方法"><a href="#5-5-bean-的生命周期方法" class="headerlink" title="5.5 bean 的生命周期方法"></a>5.5 bean 的生命周期方法</h3><p>可以为 bean 自定义一些生命周期方法，Spring在创建或销毁bean时调用。<code>init-method</code>，<code>destroy-method</code>，不能有参数。</p>
<p>IOC 容器中注册的 bean：</p>
<ul>
<li><p>单实例 bean：容器启动的时候就会创建好，容器关闭也会销毁创建的bean</p>
<p>(容器启动)构造器 —&gt; 初始化方法 —&gt; （容器关闭)销毁方法</p>
</li>
<li><p>多实例 bean：获取的时候才去创建</p>
<p>(容器启动)构造器 —&gt; 初始化方法 ，容器关闭不会调用 bean 的销毁方法</p>
</li>
</ul>
<p>在 Air 类中新增两个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Air</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double weight;</span><br><span class="line">    <span class="keyword">private</span> Double length;</span><br><span class="line">    <span class="keyword">private</span> Integer PersonNum;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;销毁方法被调用了！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;初始方法被调用了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;air04&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.Air&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destroy&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-6-bean-的后置处理器"><a href="#5-6-bean-的后置处理器" class="headerlink" title="5.6 bean 的后置处理器"></a>5.6 bean 的后置处理器</h3><p>定义一个类实现 BeanPostProcessor 接口，其中两个方法 <code>postProcessBeforeInitialization</code> 和<code>postProcessAfterInitialization </code>会在调用初始化方法前后调用。需要注册这个实现类</p>
<p>即使没有定义初始化方法，这两个方法也会被调用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 前置处理器，在初始化方法之前调用</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bean 传递过来的，将要初始化的bean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> beanName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 经该方法处理之后可以返回一个新的bean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> BeansException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;【&quot;</span>+beanName+<span class="string">&quot;】将要调用初始化方法了..BeforeInitialization..这个bean是这样的：+【&quot;</span>+bean+<span class="string">&quot;】&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 后置处理器，在初始化方法之后调用</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> beanName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 经该方法处理后返回给IOC容器保存的bean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> BeansException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;【&quot;</span>+beanName+<span class="string">&quot;】初始化方法调用完了..AfterInitialization..这个bean是这样的：+【&quot;</span>+bean+<span class="string">&quot;】&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;air04&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.Air&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destroy&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myBeanPostProcessor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.MyBeanPostProcessor&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">【air04】将要调用初始化方法了<span class="built_in">..</span>BeforeInitialization<span class="built_in">..</span>这个bean是这样的：+【Air&#123;<span class="attribute">name</span>=<span class="string">&#x27;null&#x27;</span>, <span class="attribute">weight</span>=<span class="literal">null</span>, <span class="attribute">length</span>=<span class="literal">null</span>, <span class="attribute">PersonNum</span>=<span class="literal">null</span>&#125;】</span><br><span class="line">初始方法被调用了</span><br><span class="line">【air04】初始化方法调用完了<span class="built_in">..</span>AfterInitialization<span class="built_in">..</span>这个bean是这样的：+【Air&#123;<span class="attribute">name</span>=<span class="string">&#x27;null&#x27;</span>, <span class="attribute">weight</span>=<span class="literal">null</span>, <span class="attribute">length</span>=<span class="literal">null</span>, <span class="attribute">PersonNum</span>=<span class="literal">null</span>&#125;】</span><br></pre></td></tr></table></figure>

<h2 id="6-bean-的装配"><a href="#6-bean-的装配" class="headerlink" title="6. bean 的装配"></a>6. bean 的装配</h2><h3 id="6-1-Spring-管理连接池"><a href="#6-1-Spring-管理连接池" class="headerlink" title="6.1 Spring 管理连接池"></a>6.1 Spring 管理连接池</h3><p>配置 C3P0 的数据库连接池，注册一 ComboPooledDataSource 对象即可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-2-引入外部配置文件"><a href="#6-2-引入外部配置文件" class="headerlink" title="6.2 引入外部配置文件"></a>6.2 引入外部配置文件</h3><p>首先新建一个数据库连接池的配置文件 db.properties：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>

<p>需要用到 context 命名空间：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">xsi:schemaLocation=&quot;</span><br><span class="line">      http://www.springframework.org/schema/context</span><br><span class="line">      https://www.springframework.org/schema/context/spring-context.xsd&quot;</span><br></pre></td></tr></table></figure>

<p>使用<code>context:property-placeholder location=&quot; ... &quot;</code>标签导入数据库配置文件 db.properties，就可以用 $ 取出对应的属性了：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:db.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>【一个小坑】：Spring 内部已经定义过一个 username 了，${username} 就是系统的用户名，所以这里定义的是 jdbc.username</p>
<h3 id="6-3-基于-XML-的自动装配"><a href="#6-3-基于-XML-的自动装配" class="headerlink" title="6.3 基于 XML 的自动装配"></a>6.3 基于 XML 的自动装配</h3><p>自动装配是 Spring 满足 bean 依赖的一种方式。Spring 会在上下文中自动寻找，并给 bean 自动装配属性。</p>
<p>Spring 中的三种装配方式：</p>
<ol>
<li><p>在 xml 显示配置</p>
</li>
<li><p>在 Java 中显示配置</p>
</li>
<li><p>隐式的自动装配 bean</p>
</li>
</ol>
<p>在<code>bean</code>标签中设置<code>autowire</code>属性：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;air05&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xiao.Air&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>autpwire=&quot;default/no&quot;</code>：不自动装配</p>
</li>
<li><p><code>autpwire=&quot;byName&quot;</code>：按照名字，以属性名作为id去容器中找到这个组件，为其赋值；如果找不到就装配 null</p>
</li>
<li><p><code>autpwire=&quot;byType&quot;</code>：按照类型，以属性的类型作为查找依据去容器中找到这个组件，为其赋值，<strong>该类型必须只有一个</strong>，否则会报异常NoUniqueBeanDifinetionException；如果找不到就装配 null</p>
</li>
<li><p><code>autpwire=&quot;construction&quot;</code>：按照构造器进行赋值：先按照有参构造器的参数类型进行装，如果没有就直接为组件装配null即可；如果按照类型有多个，就会把参数名作为id继续匹配，匹配到就自动装配，匹配不到就装配null。不会报错</p>
</li>
</ul>
<h2 id="7-注解开发"><a href="#7-注解开发" class="headerlink" title="7. 注解开发"></a>7. 注解开发</h2><h3 id="7-1-不同层组件"><a href="#7-1-不同层组件" class="headerlink" title="7.1 不同层组件"></a>7.1 不同层组件</h3><ol>
<li><p>通过给 bean 上添加注解，可以快速的将 bean 加入到 IOC 容器中。创建 Dao、Service、Controller层所需要用到的注解：</p>
<ul>
<li><code>@Component</code>：组件，放在类上，将某个类注册到 Spring 中，<strong>id 是类名首字母小写</strong>。相当于：<code>&lt;bean id=&quot;..&quot; class=&quot;..&quot;&gt;</code></li>
<li><code>@Repository</code>：Dao 持久化层</li>
<li><code>@Servic</code>：Service 业务逻辑层</li>
<li><code>@Controller</code>：Controller 控制器层。后面三个含义更清晰</li>
</ul>
</li>
<li><p>还需要告诉Spring，自动扫描加了注解的组件：**添加 context 名称空间，<code>&lt;context:component-scan base-package=&quot;com.xiao&quot;/&gt;</code>**。还需要有 AOP 包的依赖。</p>
</li>
<li><p><strong>组件的 id 默认是类名首字母小写，作用于默认是单例</strong>，可以修改。</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository(value = &quot;book&quot;)</span></span><br><span class="line"><span class="meta">@Scope(value = &quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>@Value</code>：注入值，注入基本数据类型和 String 类型数据</p>
</li>
<li><p><code>@Scope</code>：标注作用域。singleton, prototype…</p>
<p>细节：如果注解中有且只有一个属性要赋值时，且名称是 value，value 在赋值是可以不写。</p>
</li>
</ul>
<h3 id="7-2-context-扫描包的配置"><a href="#7-2-context-扫描包的配置" class="headerlink" title="7.2 context 扫描包的配置"></a>7.2 context 扫描包的配置</h3><p>指定要扫描的包：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.xiao&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>指定扫描包时指定排除一些不要的组件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.xiao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定排除不要的组件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;...&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;...&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>type=&quot;annotation&quot;</code>：按照注解进行排除，<code>expression</code>属性中指定要排除的注解的全类名</li>
<li><code>type=&quot;assignable&quot;</code>：按照类名进行排除，<code>expression</code>属性中指定要排除的类的全类名</li>
</ul>
<p>只扫描进入指定的组件，默认都是全部扫描进来，<code>use-default-filters</code>需要设置为false：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.xiao&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;...&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;...&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-Autowired自动装配"><a href="#7-3-Autowired自动装配" class="headerlink" title="7.3 Autowired自动装配"></a>7.3 Autowired自动装配</h3><h4 id="01-基本使用"><a href="#01-基本使用" class="headerlink" title="01 基本使用"></a>01 基本使用</h4><p>直接在成员上添加<code> @Autowired</code>完成自动装配。</p>
<p>Dao 层：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">	<span class="comment">//声明一个方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readBook</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;读了一本书！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Service 层，使用注解<code>@Autowired</code>完成成员 BookDao 的自动装配，调用 dao 层的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">	<span class="comment">//使用@Autowired完成成员BookDao的自动装配</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookDao.readBook();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Controller 层，使用注解<code>@Autowired</code>完成成员 BookService 的自动装配，调用 service 层的方法：：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">one</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookService.read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="02-Autowired-的执行流程"><a href="#02-Autowired-的执行流程" class="headerlink" title="02 Autowired 的执行流程"></a>02 Autowired 的执行流程</h4><p><code>@Autowired</code>可以直接用在属性上，执行流程：</p>
<ol>
<li><p>首先按照类型去容器中找对应的组件，如果找到一个就赋值，找不到就抛异常；</p>
</li>
<li><p>如果有多个类型匹配时，会使用要注入的对象变量名称作为 bean 的 id，在 spring 容器查找，找到了也可以注入成功，找不到就报错。</p>
</li>
<li><p>结合注解<code> @Qualifer</code>，指定一个 id：在自动按照类型注入的基础之上，再按照指定的 bean 的 id 去查找。它在给字段注入时不能独立使用，必须和<code>@Autowired</code>一起使用；但是给方法参数注入时，可以独立使用。</p>
</li>
</ol>
<p><code>@Autowired</code>标注的属性如果找不到就会报错，可以指定 required 属性，找不到就自动装配 null</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired(required = false )</span></span><br></pre></td></tr></table></figure>

<h4 id="03-注解加在方法上"><a href="#03-注解加在方法上" class="headerlink" title="03 注解加在方法上"></a>03 注解加在方法上</h4><p><code> @Autowired</code>：也可以使用在 set 方法上，执行流程跟上面一样；</p>
<p><code> @Qualifer</code>：还可以用在方法的参数，指定按照哪个 id 去装配。</p>
<p><code> @Nullable</code>：标记的属性可以 null</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class BookService &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private void setBookDao(BookDao bookDao) &#123;</span><br><span class="line">        this.bookDao = bookDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void read() &#123;</span><br><span class="line">        this.bookDao.readBook();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="04-Resource"><a href="#04-Resource" class="headerlink" title="04 @Resource"></a>04 @Resource</h4><p><code> @Resource：</code>直接按照 Bean 的 id 注入，是 Java 自带的注解。执行流程：</p>
<p>　　1. 如果同时指定了 name 和 type，则从 Spring 上下文中找到唯一匹配的 bean 进行装配，找不到则抛出异常<br>　　2. 如果指定了 name，则从上下文中查找id匹配的 bean 进行装配，找不到则抛出异常<br>　　3. 如果指定了 type，则从上下文中找到类型匹配的唯一 bean 进行装配，找不到或者找到多个，都会抛出异常<br>　　4. 如果既没有指定 name，又没有指定 type，则自动按照 byName 方式进行装配；如果没有匹配，则回退为一个原始类型进行匹配，如果匹配则自动装配；</p>
<h3 id="7-4-Spring的单元测试"><a href="#7-4-Spring的单元测试" class="headerlink" title="7.4 Spring的单元测试"></a>7.4 Spring的单元测试</h3><p>使用 Spring 的单元测试，不需要用 ioc.getBean() 来获取组件了，直接 Autowired 组件，Spring 自动装配</p>
<p>导入依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--Junit--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>添加注解：</p>
<ul>
<li>@ContextConfiguration：指定 Spring 配置文件的位置</li>
<li>@RunWith：指定用哪种驱动进行单元测试，默认是 junit，这里指定用 Spring 的单元测试模块来执行标了@Test 注解的测试方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *@ContextConfiguration:指定Spring配置文件的位置</span></span><br><span class="line"><span class="comment"> *@RunWith：指定用哪种驱动进行单元测试，默认是junit,这里指定用Spring的单元测试模块来执行标了@Test注解的测试方法</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &quot;classpath:ApplicationContext.xml&quot;)</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test02</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookController bookController;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookController.one();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Spring/" rel="tag"># Spring</a>
              <a href="/tags/IOC/" rel="tag"># IOC</a>
              <a href="/tags/Bean/" rel="tag"># Bean</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/06/05/Mybatis(%E5%9B%9B)-%E5%8A%A8%E6%80%81SQL%E5%92%8C%E7%BC%93%E5%AD%98/" rel="prev" title="MyBatis (四)-动态 SQL 和缓存">
      <i class="fa fa-chevron-left"></i> MyBatis (四)-动态 SQL 和缓存
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/06/12/Spring(%E4%BA%8C)-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E3%80%81AOP/" rel="next" title="Spring (二) - 动态代理、AOP">
      Spring (二) - 动态代理、AOP <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Spring-%E6%A6%82%E8%BF%B0"><span class="nav-text">1. Spring 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-HelloWorld-%E6%A1%88%E4%BE%8B"><span class="nav-text">2. HelloWorld 案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-IOC-%E5%92%8C-DI"><span class="nav-text">2.1 IOC 和 DI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="nav-text">2.2 入门案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-%E6%A0%B9%E6%8D%AE-bean-%E7%B1%BB%E5%9E%8B%E8%8E%B7%E5%8F%96-bean-%E5%AE%9E%E4%BE%8B"><span class="nav-text">2.3 根据 bean 类型获取 bean 实例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%B1%9E%E6%80%A7%E7%9A%84%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="nav-text">3. 属性的注入方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-setter-%E6%B3%A8%E5%85%A5"><span class="nav-text">3.1 setter 注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E9%80%9A%E8%BF%87%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5"><span class="nav-text">3.2 通过构造器注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-p-%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E6%B3%A8%E5%85%A5"><span class="nav-text">3.3 p 名称空间注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-c-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E6%B3%A8%E5%85%A5"><span class="nav-text">3.4 c 命名空间注入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E6%B3%A8%E5%85%A5%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="nav-text">4. 注入不同类型的属性值</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-%E6%B3%A8%E5%85%A5%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%80%BC"><span class="nav-text">4.1 注入基本类型值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-%E6%B3%A8%E5%85%A5-null"><span class="nav-text">4.2 注入 null</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-%E6%B3%A8%E5%85%A5-bean"><span class="nav-text">4.3 注入 bean</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E8%B5%8B%E5%80%BC"><span class="nav-text">4.3 集合类型赋值</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#01-%E6%95%B0%E7%BB%84"><span class="nav-text">01 数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#02-List"><span class="nav-text">02 List</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#03-Map"><span class="nav-text">03 Map</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#04-Properties"><span class="nav-text">04 Properties</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#05-util-%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4"><span class="nav-text">05 util 名称空间</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-%E7%BA%A7%E8%81%94%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC"><span class="nav-text">4.4 级联属性赋值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-%E7%BB%A7%E6%89%BF%E5%AE%9E%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E9%87%8D%E7%94%A8"><span class="nav-text">4.5 继承实现配置信息重用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-bean-%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%A7%E8%B4%A8"><span class="nav-text">5 bean 的一些性质</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-bean-%E4%B9%8B%E9%97%B4%E4%BE%9D%E8%B5%96"><span class="nav-text">5.1 bean 之间依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-bean-%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F-scope"><span class="nav-text">5.2 bean 的作用域 scope</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E4%B8%8E%E5%AE%9E%E4%BE%8B%E5%B7%A5%E5%8E%82"><span class="nav-text">5.3 静态工厂与实例工厂</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%8E%82"><span class="nav-text">5.4 自定义工厂</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-bean-%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%96%B9%E6%B3%95"><span class="nav-text">5.5 bean 的生命周期方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-6-bean-%E7%9A%84%E5%90%8E%E7%BD%AE%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">5.6 bean 的后置处理器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-bean-%E7%9A%84%E8%A3%85%E9%85%8D"><span class="nav-text">6. bean 的装配</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-Spring-%E7%AE%A1%E7%90%86%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-text">6.1 Spring 管理连接池</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">6.2 引入外部配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-%E5%9F%BA%E4%BA%8E-XML-%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="nav-text">6.3 基于 XML 的自动装配</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="nav-text">7. 注解开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-%E4%B8%8D%E5%90%8C%E5%B1%82%E7%BB%84%E4%BB%B6"><span class="nav-text">7.1 不同层组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-context-%E6%89%AB%E6%8F%8F%E5%8C%85%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="nav-text">7.2 context 扫描包的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-Autowired%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="nav-text">7.3 Autowired自动装配</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#01-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-text">01 基本使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#02-Autowired-%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-text">02 Autowired 的执行流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#03-%E6%B3%A8%E8%A7%A3%E5%8A%A0%E5%9C%A8%E6%96%B9%E6%B3%95%E4%B8%8A"><span class="nav-text">03 注解加在方法上</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#04-Resource"><span class="nav-text">04 @Resource</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-Spring%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-text">7.4 Spring的单元测试</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Kong Xiao"
      src="/images/author.png">
  <p class="site-author-name" itemprop="name">Kong Xiao</p>
  <div class="site-description" itemprop="description">半路出家 举步维艰</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xiaokong0510" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiaokong0510" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2021 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kongxiao</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
